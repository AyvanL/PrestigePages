<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PestigePages â€” Premium Books</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/homepage.css" />
    <style>
      /* Fade-in animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Apply fade-in to sections */
      .fade-in {
        opacity: 0;
        animation: fadeIn 1s ease forwards;
      }

      .site-header {
        animation: fadeIn 0.8s ease forwards;
      }

      .hero {
        opacity: 0;
        animation: fadeIn 1s ease 0.2s forwards;
      }

      .features {
        opacity: 0;
        animation: fadeIn 1s ease 0.4s forwards;
      }

      #popular {
        opacity: 0;
        animation: fadeIn 1s ease 0.6s forwards;
      }

      .card {
        opacity: 0;
        animation: fadeIn 0.8s ease forwards;
      }
      
      html {
    scroll-behavior: smooth;
  }

      /* Stagger card animations */
      #book-grid .card:nth-child(1) { animation-delay: 0.7s; }
      #book-grid .card:nth-child(2) { animation-delay: 0.8s; }
      #book-grid .card:nth-child(3) { animation-delay: 0.9s; }
      #book-grid .card:nth-child(4) { animation-delay: 1.0s; }
      #book-grid .card:nth-child(5) { animation-delay: 1.1s; }
      #book-grid .card:nth-child(6) { animation-delay: 1.2s; }
      #book-grid .card:nth-child(7) { animation-delay: 1.3s; }
      #book-grid .card:nth-child(8) { animation-delay: 1.4s; }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="container nav">
        <button
          class="icon-btn hamburger"
          id="navToggle"
          aria-label="Open menu"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3 6h18M3 12h18M3 18h18"
              stroke="#5f5a54"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
        <div class="brand">PrestigePages</div>
        <nav class="nav-links" aria-label="Main">
          <a href="#home">Home</a>
          <a href="#popular">Store</a>
          <a href="about-us.html">About us</a>
          <a href="faq.html">FAQ</a>
        </nav>

        <div class="nav-spacer"></div>

        <div class="actions">
          <a href="login.html" class="icon-btn" aria-label="Wishlist">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12.1 20.3 4.7 13c-2.6-2.6-1.9-6.9 1.6-8.5 1.7-.8 3.7-.5 5.1.7 1.4-1.2 3.4-1.5 5.1-.7 3.5 1.6 4.2 5.9 1.6 8.5l-7.3 7.3Z"
                stroke="#7E6E5B"
                stroke-width="1.6"
                fill="#fff"
              />
            </svg>
          </a>

          <a href="login.html" class="icon-btn" aria-label="Cart">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3 3h2l2.4 12.3a2 2 0 0 0 2 1.7h6.9a2 2 0 0 0 2-1.6L21 7H6"
                stroke="#7E6E5B"
                stroke-width="1.6"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle cx="10" cy="20" r="1.5" fill="#7E6E5B" />
              <circle cx="17" cy="20" r="1.5" fill="#7E6E5B" />
            </svg>
          </a>

          <nav class="nav-links" aria-label="Main">
            <a href="login.html">Log In</a>
            <a href="signup.html">Sign Up</a>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <!-- Hero -->
      <section class="hero" id="home">
        <div class="container hero-inner">
          <div class="hero-copy fade-in">
            <div class="eyebrow"></div>
            <h1></h1>
            <p></p>
            <div class="cta">
              <a href="#popular" class="btn"></a>
              <a href="about-us.html" class="btn secondary"></a>
            </div>
          </div>
          <div class="hero-art fade-in">
            <div class="stack">
              <img alt="Book stack" src="" />
            </div>
            <div class="blob" aria-hidden="true"></div>
        </div>
      </section>

      <!-- Feature bar -->
      <section class="features">
        <div class="container feature-row">
          <div class="feature">
            <div class="badge" aria-hidden>
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 2 3 6v6c0 5 3.8 9.7 9 10 5.2-.3 9-5 9-10V6l-9-4Z"
                  fill="#F6E8C8"
                  stroke="#C89B3C"
                />
                <path
                  d="m8.5 12 2.3 2.3 4.7-4.7"
                  fill="none"
                  stroke="#3F7A3B"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
            </div>
            <div>
              <h4>Certified</h4>
              <p>Authentic editions from the publisher</p>
            </div>
          </div>
          <div class="feature">
            <div class="feature-badge" aria-hidden>
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <rect
                  x="3"
                  y="8"
                  width="18"
                  height="12"
                  rx="2"
                  fill="#F6E8C8"
                  stroke="#C89B3C"
                />
                <path
                  d="M7 8V6a5 5 0 0 1 10 0v2"
                  stroke="#7E6E5B"
                  stroke-width="2"
                  fill="none"
                />
              </svg>
            </div>
            <div>
              <h4>Secure</h4>
              <p>Encrypted checkout and privacyâ€‘first</p>
            </div>
          </div>
          <div class="feature">
            <div class="badge" aria-hidden>
              <svg
                width="22"
                height="22"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M3 14h16l2 4H5l-2-4Z"
                  fill="#F6E8C8"
                  stroke="#C89B3C"
                />
                <path d="M7 14V9h12l2 5" fill="none" stroke="#7E6E5B" />
                <circle cx="8" cy="19" r="1.6" fill="#7E6E5B" />
                <circle cx="18" cy="19" r="1.6" fill="#7E6E5B" />
              </svg>
            </div>
            <div>
              <h4>Shipping</h4>
              <p>Fast, reliable worldwide delivery</p>
            </div>
          </div>
        </div>
      </section>
      <!-- Popular books -->
      <section id="popular" class="container popular-section fade-in">
        <div class="popular-header" style="padding-top: 5rem">
          <h2>Our Popular Books</h2>

          <!-- Search Input -->
          <div class="search" role="search">
            <input id="searchInput" type="search" placeholder="Search booksâ€¦" />
            <svg aria-hidden width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="11" cy="11" r="7" stroke="#A89983" stroke-width="2" />
              <path d="m20 20-3.5-3.5" stroke="#A89983" stroke-width="2" stroke-linecap="round" />
            </svg>
          </div>
        </div>

        <div class="content-wrapper">
          <!-- Sidebar -->
          <aside class="sidebar">
            <h3>Categories</h3>
            <label><input type="radio" name="category" value="all" checked /> See All</label><br />
            <label><input type="radio" name="category" value="romance" /> Romance</label><br />
            <label><input type="radio" name="category" value="mystery" /> Mystery</label><br />
            <label><input type="radio" name="category" value="science" /> Science</label><br />
            <label><input type="radio" name="category" value="non-fiction" /> Non-Fiction</label><br />
            <label><input type="radio" name="category" value="children" /> Children's Books</label><br />
            <label><input type="radio" name="category" value="classics" /> Classics</label><br />
            <label><input type="radio" name="category" value="comics" /> Comics</label><br />
            <label><input type="radio" name="category" value="business" /> Business</label>
            <hr />
            <h3>Price Range</h3>
            <div class="price-range">
              <label for="minPrice">Min: â‚±<span id="minPriceVal">0</span></label>
              <input type="range" id="minPrice" min="0" max="2000" step="50" value="0" />

              <label for="maxPrice">Max: â‚±<span id="maxPriceVal">2000</span></label>
              <input type="range" id="maxPrice" min="0" max="2000" step="50" value="2000" />
            </div>
          </aside>

          <!-- Main content -->
          <div class="main-content">
            <div id="book-grid" class="grid" aria-live="polite"></div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <div style="display: flex; gap: 14px; align-items: center">
          <div class="brand">PrestigePages.com</div>
          <span>Â© <span id="yr"></span> â€¢ All rights reserved</span>
        </div>
      </div>
    </footer>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        onSnapshot
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      // Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyCC_14beDBhudrtoAIFqc29TCMY5zoa4AA",
        authDomain: "prestige-pages.firebaseapp.com",
        databaseURL: "https://prestige-pages-default-rtdb.firebaseio.com",
        projectId: "prestige-pages",
        storageBucket: "prestige-pages.appspot.com",
        messagingSenderId: "1065922943021",
        appId: "1:1065922943021:web:e5829dd09e206063b500a4",
        measurementId: "G-V0E6PXN1Z5",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      // Real-time hero content from CMS
      function setupHeroRealtime() {
        const docRef = doc(db, 'content', 'hero-section');
        
        // Default values
        const defaults = {
          eyebrow: 'New Arrivals',
          title: 'Experience our\nNew Exclusive Books',
          description: 'Discover handâ€‘picked titles from acclaimed authors. Enjoy quality hardbacks, digital editions, and secure shipping right to your door.',
          imageUrl: 'https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=700&auto=format&fit=crop',
          primaryButton: 'Shop Now',
          secondaryButton: 'Learn more'
        };
        
        // Set up real-time listener
        onSnapshot(docRef, (docSnap) => {
          console.log('ðŸ”„ Hero content updated!');
          const data = docSnap.exists() ? docSnap.data() : defaults;
          
          // Update eyebrow text
          const eyebrowEl = document.querySelector('.hero .eyebrow');
          if (eyebrowEl) {
            eyebrowEl.textContent = data.eyebrow || defaults.eyebrow;
          }
          
          // Update title (handle line breaks)
          const titleEl = document.querySelector('.hero h1');
          if (titleEl) {
            titleEl.innerHTML = (data.title || defaults.title).replace(/\n/g, '<br>');
          }
          
          // Update description
          const descEl = document.querySelector('.hero-copy > p');
          if (descEl) {
            descEl.textContent = data.description || defaults.description;
          }
          
          // Update hero image
          const imageEl = document.querySelector('.hero-art .stack img');
          if (imageEl) {
            imageEl.src = data.imageUrl || defaults.imageUrl;
          }
          
          // Update primary button text
          const primaryBtnEl = document.querySelector('.hero .cta .btn:not(.secondary)');
          if (primaryBtnEl) {
            primaryBtnEl.textContent = data.primaryButton || defaults.primaryButton;
          }
          
          // Update secondary button text
          const secondaryBtnEl = document.querySelector('.hero .cta .btn.secondary');
          if (secondaryBtnEl) {
            secondaryBtnEl.textContent = data.secondaryButton || defaults.secondaryButton;
          }
        }, (error) => {
          console.error('Error with hero real-time listener:', error);
          // Load defaults on error
          const eyebrowEl = document.querySelector('.hero .eyebrow');
          const titleEl = document.querySelector('.hero h1');
          const descEl = document.querySelector('.hero-copy > p');
          const imageEl = document.querySelector('.hero-art .stack img');
          const primaryBtnEl = document.querySelector('.hero .cta .btn:not(.secondary)');
          const secondaryBtnEl = document.querySelector('.hero .cta .btn.secondary');
          
          if (eyebrowEl) eyebrowEl.textContent = 'New Arrivals';
          if (titleEl) titleEl.innerHTML = 'Experience our<br />New Exclusive Books';
          if (descEl) descEl.textContent = 'Discover handâ€‘picked titles from acclaimed authors. Enjoy quality hardbacks, digital editions, and secure shipping right to your door.';
          if (imageEl) imageEl.src = 'https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=700&auto=format&fit=crop';
          if (primaryBtnEl) primaryBtnEl.textContent = 'Shop Now';
          if (secondaryBtnEl) secondaryBtnEl.textContent = 'Learn more';
        });
      }

      // Setup hero real-time listener on page load
      setupHeroRealtime();

      // Check if user is logged in
      onAuthStateChanged(auth, (user) => {
        if (user) {
          window.location.href = "homepage-logged.html";
        }
      });
      // --- Demo data -------------------------------------------------------
      const BOOKS = [
        {
          title: "For the Record",
          author: "Emma Lord",
          price: 1025.99,
          rating: 4,
          category: "romance",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1726945848i/217387723.jpg",
        },
        {
          title: "High Seasons",
          author: "Katie Bishop",
          price: 1709.94,
          rating: 3.83,
          category: "mystery",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1728226919i/217388179.jpg",
        },
        {
          title:
            "We Are Eating the Earth: The Race to Fix Our Food System and Save Our Climate",
          author: "Michael Grunwarld",
          price: 1708.17,
          rating: 4.26,
          category: "science",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1732454271i/220595471.jpg",
        },
        {
          title: "Hotshot: A Life on Fire",
          author: "River Selby",
          price: 1200,
          rating: 3.81,
          category: "non-fiction",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1739100108i/219301091.jpg",
        },
        {
          title: "Ghost Circus",
          author: "Adrienne Kress, Jade Zhang",
          price: 799,
          rating: 4,
          category: "children",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1740594745i/218681305.jpg",
        },
        {
          title: "The Fellowship of the Ring",
          author: "J.R.R. Tolkien",
          price: 799,
          rating: 4,
          category: "classics",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1654215925i/61215351.jpg",
        },
        {
          title: "Psylocke Vol. 1: Guardian",
          author: "Alyssa Wong",
          price: 799,
          rating: 3.52,
          category: "comics",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1728445659i/220240990.jpg",
        },
        {
          title: "Abundance",
          author: "Ezra Klein, Derek Thompson",
          price: 799,
          rating: 4.02,
          category: "business",
          cover:
            "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1737312514i/176444106.jpg",
        },
      ];

      // --- Render helpers --------------------------------------------------
      const el = (tag, cls, html) => {
        const n = document.createElement(tag);
        if (cls) n.className = cls;
        if (html !== undefined) n.innerHTML = html;
        return n;
      };

      const stars = (n) => {
        const full = "â˜…".repeat(Math.max(0, Math.min(5, n)));
        const empty = "â˜†".repeat(5 - Math.max(0, Math.min(5, n)));
        return `<span class="rating" aria-label="${n} out of 5 stars">${full}${empty}</span>`;
      };

      function renderBooks(list) {
        const grid = document.getElementById("book-grid");
        grid.innerHTML = "";

        list.forEach((b) => {
          const card = el("article", "card");

          const img = el("img", "cover");
          img.alt = `${b.title} cover`;
          img.src = b.cover;
          card.appendChild(img);

          const body = el("div", "card-body");
          body.appendChild(el("div", "title", b.title));
          body.appendChild(el("div", "byline", `by ${b.author}`));
          body.insertAdjacentHTML("beforeend", stars(b.rating));

          const priceRow = el("div", "price-row");
          priceRow.appendChild(
            el(
              "div",
              "price",
              `â‚±${b.price.toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              })}`
            )
          );
          priceRow.appendChild(el("div", "pill", "In stock"));
          body.appendChild(priceRow);

          const actions = el("div", "actions-row");

          const addBtn = el("button", "btn small");
          addBtn.textContent = "Add to Cart";
          addBtn.addEventListener("click", () => {
            window.location.href = "login.html";
          });

          const heart = el("button", "btn icon secondary");
          heart.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M12.1 20.3 4.7 13c-2.6-2.6-1.9-6.9 1.6-8.5 1.7-.8 3.7-.5 5.1.7 1.4-1.2 3.4-1.5 5.1-.7 3.5 1.6 4.2 5.9 1.6 8.5l-7.3 7.3Z" stroke="#7E6E5B" stroke-width="1.6" fill="#fff"/>
        </svg>`;

          heart.addEventListener("click", () => {
            // Logged-out landing page: redirect to login instead of toggling wishlist UI
            window.location.href = "login.html";
          });

          actions.append(addBtn, heart);
          body.appendChild(actions);

          card.appendChild(body);
          grid.appendChild(card);
        });
      }

      // Filtering state
      const state = {
        q: "",
        category: "all",
        minPrice: 0,
        maxPrice: 2000,
      };

      function applyFilters() {
        const q = state.q.toLowerCase().trim();
        const list = BOOKS.filter((b) => {
          const matchesQ = (b.title + " " + b.author)
            .toLowerCase()
            .includes(q);
          const matchesCat = state.category === "all" || b.category === state.category;
          const matchesPrice = b.price >= state.minPrice && b.price <= state.maxPrice;
          return matchesQ && matchesCat && matchesPrice;
        });
        renderBooks(list);
      }

      // Search filter
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", (e) => {
        state.q = e.target.value || "";
        applyFilters();
      });

      // Category filter
      document.querySelectorAll('input[name="category"]').forEach((el) => {
        el.addEventListener("change", (e) => {
          state.category = e.target.value;
          applyFilters();
        });
      });

      // Price range filter
      const minEl = document.getElementById("minPrice");
      const maxEl = document.getElementById("maxPrice");
      const minVal = document.getElementById("minPriceVal");
      const maxVal = document.getElementById("maxPriceVal");
      const clamp = () => {
        if (state.minPrice > state.maxPrice) state.minPrice = state.maxPrice;
        minEl.value = String(state.minPrice);
        maxEl.value = String(state.maxPrice);
      };
      minEl.addEventListener("input", (e) => {
        state.minPrice = parseInt(e.target.value, 10) || 0;
        minVal.textContent = state.minPrice;
        clamp();
        applyFilters();
      });
      maxEl.addEventListener("input", (e) => {
        state.maxPrice = parseInt(e.target.value, 10) || 2000;
        maxVal.textContent = state.maxPrice;
        clamp();
        applyFilters();
      });

      // mobile nav demo (expand inline links under header)
      document.getElementById("navToggle").addEventListener("click", () => {
        const existing = document.getElementById("mobileMenu");
        if (existing) {
          existing.remove();
          return;
        }
        const menu = document.createElement("div");
        menu.id = "mobileMenu";
        menu.style.background = "var(--paper)";
        menu.style.borderTop = "1px solid var(--line)";
        menu.innerHTML = `<div class="container" style="padding:12px 20px 16px; display:grid; gap:10px;">
        <a href="index.html">Home</a>
        <a href="#popular">Store</a>
        <a href="about-us.html">About us</a>
        <a href="login.html">Log In</a>
        <a href="signup.html">Sign Up</a>
      </div>`;
        document.querySelector(".site-header").appendChild(menu);
      });

      // boot
      document.getElementById("yr").textContent = new Date().getFullYear();
  renderBooks(BOOKS);
    </script>
  </body>
</html>
