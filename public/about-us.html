<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PestigePages ‚Äî About Us</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/about-us.css" />

    <style>
    /* Fade-in animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Apply fade-in to sections */
    .fade-in {
      opacity: 0;
      animation: fadeIn 1s ease forwards;
    }

    .site-header {
      animation: fadeIn 0.8s ease forwards;
    }

    .hero {
      opacity: 0;
      animation: fadeIn 1s ease 0.2s forwards;
    }

    .features {
      opacity: 0;
      animation: fadeIn 1s ease 0.4s forwards;
    }

    #popular {
      opacity: 0;
      animation: fadeIn 1s ease 0.6s forwards;
    }

    .card {
      opacity: 0;
      animation: fadeIn 0.8s ease forwards;
    }

    /* Additional animations for cart/wishlist */
    #cart-modal,
    #wishlist-modal {
      opacity: 0;
      animation: fadeIn 0.3s ease forwards;
    }

    .welcome-text {
      opacity: 0;
      animation: fadeIn 1s ease 0.3s forwards;
    }
  </style>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="container nav">
        <button
          class="icon-btn hamburger"
          id="navToggle"
          aria-label="Open menu"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3 6h18M3 12h18M3 18h18"
              stroke="#5f5a54"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
        <div class="brand">PrestigePages</div>
        <nav class="nav-links" aria-label="Main">
          <a href="index.html">Home</a>
          <a href="index.html#popular">Store</a>
          <a href="about-us.html">About us</a>
          <a href="faq.html">FAQ</a>
        </nav>

        <div class="nav-spacer"></div>

        <div class="actions">
          <button class="icon-btn" aria-label="Wishlist" onclick="window.location.href='login.html';">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12.1 20.3 4.7 13c-2.6-2.6-1.9-6.9 1.6-8.5 1.7-.8 3.7-.5 5.1.7 1.4-1.2 3.4-1.5 5.1-.7 3.5 1.6 4.2 5.9 1.6 8.5l-7.3 7.3Z"
                stroke="#7E6E5B"
                stroke-width="1.6"
                fill="#fff"
              />
            </svg>
          </button>

          <button class="icon-btn" aria-label="Cart" onclick="window.location.href='login.html';">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3 3h2l2.4 12.3a2 2 0 0 0 2 1.7h6.9a2 2 0 0 0 2-1.6L21 7H6"
                stroke="#7E6E5B"
                stroke-width="1.6"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle cx="10" cy="20" r="1.5" fill="#7E6E5B" />
              <circle cx="17" cy="20" r="1.5" fill="#7E6E5B" />
            </svg>
          </button>

          <nav class="nav-links" aria-label="Main">
            <a href="login.html">Log In</a>
            <a href="signup.html">Sign Up</a>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <!-- Hero -->
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-copy">
            <h1 id="aboutTitle"></h1>
            <p id="aboutParagraph1" style="text-align: justify"></p>

            <br />

            <p id="aboutParagraph2" style="text-align: justify"></p>
          </div>
          <div class="hero-art">
            <div class="stack">
              <img
                alt="Book stack"
                src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=700&auto=format&fit=crop"
              />
            </div>
            <div class="blob" aria-hidden="true"></div>
          </div>
        </div>
      </section>
    </main>

    <footer style="background-color: #222222">
      <div class="container">
        <div style="display: flex; gap: 14px; align-items: center">
          <div class="brand">PrestigePages.com</div>
          <span>¬© <span id="yr"></span> ‚Ä¢ All rights reserved</span>
        </div>
      </div>
    </footer>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import {
        getAuth,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

      // Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyCC_14beDBhudrtoAIFqc29TCMY5zoa4AA",
        authDomain: "prestige-pages.firebaseapp.com",
        databaseURL: "https://prestige-pages-default-rtdb.firebaseio.com",
        projectId: "prestige-pages",
        storageBucket: "prestige-pages.appspot.com",
        messagingSenderId: "1065922943021",
        appId: "1:1065922943021:web:e5829dd09e206063b500a4",
        measurementId: "G-V0E6PXN1Z5",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // search filtering
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", (e) => {
        const q = e.target.value.toLowerCase().trim();
        const filtered = BOOKS.filter((b) =>
          (b.title + " " + b.author).toLowerCase().includes(q),
        );
        renderBooks(filtered);
      });

      // mobile nav demo (expand inline links under header)
      document.getElementById("navToggle").addEventListener("click", () => {
        const existing = document.getElementById("mobileMenu");
        if (existing) {
          existing.remove();
          return;
        }
        const menu = document.createElement("div");
        menu.id = "mobileMenu";
        menu.style.background = "var(--paper)";
        menu.style.borderTop = "1px solid var(--line)";
        menu.innerHTML = `<div class="container" style="padding:12px 20px 16px; display:grid; gap:10px;">
        <a href="index.html">Home</a>
        <a href="index.html">Store</a>
        <a href="about-us.html">About us</a>
        <a href="login.html">Log In</a>
        <a href="signup.html">Sign Up</a>
      </div>`;
        document.querySelector(".site-header").appendChild(menu);
      });

      // boot
      document.getElementById("yr").textContent = new Date().getFullYear();
      renderBooks(BOOKS);
    </script>

    <!-- Load About Us Content from Firebase -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
      import { getFirestore, doc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';
      
      // Use existing Firebase config
      const aboutFirebaseConfig = {
        apiKey: "AIzaSyCC_14beDBhudrtoAIFqc29TCMY5zoa4AA",
        authDomain: "prestige-pages.firebaseapp.com",
        databaseURL: "https://prestige-pages-default-rtdb.firebaseio.com",
        projectId: "prestige-pages",
        storageBucket: "prestige-pages.appspot.com",
        messagingSenderId: "1065922943021",
        appId: "1:1065922943021:web:e5829dd09e206063b500a4",
        measurementId: "G-V0E6PXN1Z5"
      };

      const aboutApp = initializeApp(aboutFirebaseConfig, 'about-app');
      const aboutDb = getFirestore(aboutApp);

      // Real-time listener for About Us content
      function setupAboutUsRealtime() {
        console.log('üîç Setting up real-time listener for About Us...');
        const docRef = doc(aboutDb, 'content', 'about-us');
        
        onSnapshot(docRef, (docSnap) => {
          console.log('ÔøΩ About Us content updated!');
          
          if (docSnap.exists()) {
            const data = docSnap.data();
            console.log('‚úÖ Data retrieved:', data);
            
            const titleEl = document.getElementById('aboutTitle');
            const p1El = document.getElementById('aboutParagraph1');
            const p2El = document.getElementById('aboutParagraph2');
            
            if (titleEl && data.title) {
              titleEl.textContent = data.title;
              console.log('‚úèÔ∏è Title updated to:', data.title);
            }
            if (p1El && data.paragraph1) {
              p1El.textContent = data.paragraph1;
              console.log('‚úèÔ∏è Paragraph 1 updated');
            }
            if (p2El && data.paragraph2) {
              p2El.textContent = data.paragraph2;
              console.log('‚úèÔ∏è Paragraph 2 updated');
            }
          } else {
            console.warn('‚ö†Ô∏è No About Us document found in Firebase');
          }
        }, (error) => {
          console.error('‚ùå Error with real-time listener:', error);
        });
      }

      // Setup real-time listener when DOM is ready
      if (document.readyState === 'loading') {
        console.log('‚è≥ Waiting for DOM...');
        document.addEventListener('DOMContentLoaded', setupAboutUsRealtime);
      } else {
        console.log('‚úì DOM ready, setting up listener...');
        setupAboutUsRealtime();
      }
    </script>
  </body>
</html>
